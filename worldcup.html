<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>Fetch API</title>
</head>
<body>
        <script src="https://unpkg.com/rxjs/bundles/rxjs.umd.min.js"></script>
    
            <input type="text" id="ctry" placeholder="eneter country"><br />
            <button id="hit">Go!</button>
  
    
    
    <div id="div1">

    </div>

    <script>
        document.getElementById("hit").addEventListener("click",func4);
        


         async function func4(){

             var country=document.getElementById("ctry").value;
             console.log(country);
            const { Observable, of, from } = rxjs;
            const { map, filter } = rxjs.operators;

            var data = fetch('https://raw.githubusercontent.com/lsv/fifa-worldcup-2018/master/data.json');
            var resp= await data;
            var jdata=await resp.json();

            var teams = jdata.teams;
            var groups = jdata.groups;
             from(teams)
                            .pipe(
                                filter((team)=>(team.name.localeCompare(country)==0)),
                                map((x)=>x.id)
                            )
                            .subscribe((value)=>{teamId=value;});
            // for(let team of teams){
            //     if(team.name.localeCompare(country)==0){
            //         teamId = team.id;
            //     }
            // }
            console.log(teamId);
            var selectedGroup;

            var groupArr=[];
            groupArr.push(groups.a);
            groupArr.push(groups.b);
            groupArr.push(groups.c);
            groupArr.push(groups.d);
            groupArr.push(groups.e);
            groupArr.push(groups.f);
            groupArr.push(groups.g);
            groupArr.push(groups.h);
            

            from(groupArr)
                    .pipe(
                        filter((group)=> ((
                            from(group.matches)
                                .pipe(
                                     filter((x)=>(x.home_team==teamId))
                                )!=undefined?true:false))
                        )
                    ).subscribe((x)=>selectedGroup=x);
            console.log(selectedGroup);

            //var groupName = selectedGroup.name;
            //console.log(groupName);

            // from(jdata)
            //        .pipe(
            //            map((obj)=>({msg:obj.name}))
            //            )
            //         .subscribe(
            //             (x)=>console.log(x.msg)
            //             );            

        }
       

    </script>
    
</body>
</html>